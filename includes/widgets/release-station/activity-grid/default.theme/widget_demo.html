<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <title></title>
   <link rel="stylesheet" href="http://laxarjs.org/wp-content/themes/laxar/style.css">
   <style>

path.gauge-ring-outer {
   fill: #605854;
   stroke: #504844;
   stroke-width: 3;
   stroke-linejoin: round;
   opacity: 0.3;
}

path.gauge-ring-inner {
   fill: #988880;
}

path.gauge-fill {
   fill: #8cd59f;
}

.gauge-text-hidden {
   transform: translate(-23px, 0);
   opacity: 0;
   visibility: hidden;
}

.gauge-text-in {
   transform: translate(0, 0);
   opacity: 1;
   transition: 0.6s ease-out;
   visibility: visible;
}

.gauge-text-out {
   transform: translate(23px, 0);
   opacity: 0;
   transition: 0.6s ease-out;
}

   </style>
</head>
<body>


   <div class="container">
      <div class="row">
         <svg id="gauge" class="col-md-2 col-sm-4 col-xs-12"
              version="1.1" xmlns="http://www.w3.org/2000/svg"
              viewbox="0 0 100 100">
            <g transform="translate(50, 50)">
               <g transform="rotate(45)">
                  <!--
                  <path class="gauge-ring-outer"
                        d="M 0 49 A 49 49 0 1 1 49 0
                           L 32 0 A 32 32 0 1 0 0 32
                           z" />
                  -->
                  <path class="gauge-ring-inner"
                        mask="url(gauge.svg#ring-mask)"
                        d="M 0 50 A 50 50 0 1 1 50 0
                           L 0 0 z" />
                  <path class="gauge-fill"
                        mask="url(gauge.svg#ring-mask)"
                        d="M 0 50 A 50 50 0 1 1 0 -50
                           L 0 0 z" />

               </g>
               <g mask="url(gauge.svg#text-mask)">
                  <!-- this circle is just here to grow the group to the desired
                       dimensions and avoid clipping when animating the text frames -->
                  <circle cx="0" cy="0" r="28" fill="none"/>
                  <g class="gauge-text">
                     <text class="gauge-text-inner"
                           x="0" y="-5"
                           text-anchor="middle"
                           style="font-size: 1.2em">13</text>
                     <text class="gauge-text-inner"
                           x="0" y="5"
                           text-anchor="middle"
                           style="font-size: 0.6em">
                        <tspan x="0">Commits</tspan>
                     </text>
                  </g>
                  <g class="gauge-text gauge-text-hidden">
                     <text class="gauge-text-inner"
                           x="0" y="-5"
                           text-anchor="middle"
                           style="font-size: 1.2em">3</text>
                     <text class="gauge-text-inner"
                           x="0" y="4"
                           text-anchor="middle"
                           style="font-size: 0.6em">
                        <tspan x="0">Issues</tspan>
                        <tspan x="0" dy="0.9em">closed</tspan>
                     </text>
                  </g>
                  <g class="gauge-text gauge-text-hidden">
                     <text class="gauge-text-inner"
                           x="0" y="-5"
                           text-anchor="middle"
                           style="font-size: 1.2em">1</text>
                     <text class="gauge-text-inner"
                           x="0" y="4"
                           text-anchor="middle"
                           style="font-size: 0.6em">
                        <tspan x="0">Issue</tspan>
                        <tspan x="0" dy="0.9em">opened</tspan>
                     </text>
                  </g>
                  <g class="gauge-text gauge-text-hidden">
                     <text class="gauge-text-inner"
                           x="0" y="-5"
                           text-anchor="middle"
                           style="font-size: 1.2em">1</text>
                     <text class="gauge-text-inner"
                           x="0" y="4"
                           text-anchor="middle"
                           style="font-size: 0.6em">
                        <tspan x="0">Version</tspan>
                        <tspan x="0" dy="0.9em">released</tspan>
                     </text>
                  </g>
               </g>
               <g>
                  <text class="gauge-text-scope"
                        x="0" y="24"
                        text-anchor="middle"
                        style="font-size: 0.5em">activity</text>
                  <text class="gauge-text-scope"
                        x="0" y="34"
                        text-anchor="middle"
                        style="font-size: 0.8em">
                     <tspan x="0">Last</tspan>
                     <tspan x="0" dy="10">Week</tspan>
                  </text>
               </g>
            </g>
         </svg>
         <div class="col-md-2 col-sm-4 col-xs-6">
            <h3>Issues</h3>
            <dl class="dl-horizontal">
               <dt>Open</dt>
               <dd>1</dd>
               <dt>Closed</dt>
               <dd>14</dd>
            </dl>
            <dl class="dl-horizontal">
               <dt>Commits</dt>
               <dd>123</dd>
            </dl>
         </div>
         <div class="col-md-2 col-sm-4 col-xs-6">
            <h3>Versions</h3>
            <dl class="dl-horizontal">
               <dt>Major</dt>
               <dd>1</dd>
               <dt>Minor</dt>
               <dd>14</dd>
               <dt>Patch</dt>
               <dd>2</dd>
            </dl>
         </div>
      </div>
      <div class="row">
         <div class="col-md-6">
            <h>LaxarJS/<a href="https://github.com/LaxarJS/laxar">laxar</a></h>
         </div>
      </div>
   </div>
   <script>
      (function (document) {
         var texts = document.getElementsByClassName('gauge-text');
         var offset = 0;
         var length = texts.length;

         [].forEach.call(texts, function(element) {
            element.addEventListener('transitionend', function() {
               if (element.classList.contains('gauge-text-out')) {
                  element.classList.add('gauge-text-hidden');
                  element.classList.remove('gauge-text-out');
               } else if (element.classList.contains('gauge-text-in')) {
                  element.classList.remove('gauge-text-hidden');
                  element.classList.remove('gauge-text-in');
               }
            }, true);
         });

         setInterval(function() {
            texts[offset].classList.add('gauge-text-out');
            offset = (offset + 1) % length;
            texts[offset].classList.add('gauge-text-in');
         }, 5000);

      })(document);

      function setArc(pathSeg, rad) {
         pathSeg.x = -(Math.sin(rad) * pathSeg.r1);
         pathSeg.y = (Math.cos(rad) * pathSeg.r2);
         pathSeg.largeArcFlag = rad > Math.PI;
      }

      function setGauge(element, value) {
         var rad = Math.PI * value * 1.5; // value = 1.0  -> rad = 270deg = 1.5rad
         setArc(element.pathSegList[1], rad);
      }

      var x = document.getElementById('gauge');
      x.addEventListener('click', function() {
         var v = Math.random();
         var t = 0;
         var i = setInterval(function() {
            if (t>=1) {
               t = 1;
               clearInterval(i);
            }
            setGauge(x.getElementsByClassName('gauge-fill')[0], v*t);
            t += 0.1;
         }, 40);
      });
   </script>
</body>
</html>
