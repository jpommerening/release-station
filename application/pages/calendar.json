{
   "layout": "application",
   "extends": "auth_base",

   "areas": {
      "activities": [
         {
            "widget": "amd:laxar-github/events-activity",
            "features": {
               "auth": {
                  "resource": "accessToken",
                  "flag": "authenticated"
               },
               "events": {
                  "resource": "events",
                  "sources": {
                     "resource": "repos"
                  }
               }
            }
         },
         {
            "widget": "amd:laxar-github/data-activity",
            "features": {
               "auth": {
                  "resource": "accessToken",
                  "flag": "authenticated"
               },
               "data": {
                  "resource": "commits",
                  "sources": {
                     "resource": "details",
                     "follow": "payload.url"
                  }
               }
            }
         },
         {
            "widget": "amd:laxar-github/data-activity",
            "features": {
               "auth": {
                  "resource": "accessToken",
                  "flag": "authenticated"
               },
               "data": {
                  "resource": "issues",
                  "sources": {
                     "resource": "details",
                     "follow": "payload.issue.url"
                  }
               }
            }
         }
      ],

      "popups": [
         {
            "widget": "amd:laxar-popup-widget",
            "id": "details",
            "features": {
               "content": {
                  "layout": "popup"
               },
               "open": {
                  "onActions": [ "openDetails" ]
               },
               "close": {
                  "onActions": [ "closeDetails" ]
               },
               "closeIcon": {
                  "enabled": true
               }
            }
         }
      ],

      "details.header": [
         {
            "widget": "amd:laxar-headline-widget",
            "features": {
               "headline": {
                  "level": 3,
                  "i18nHtmlText": {
                     "en-US": "Details"
                  }
               }
            }
         }
      ],

      "details.content": [
         {
            "widget": "release-station/details-widget",
            "features": {
               "details": {
                  "resource": "details"
               },
               "tabs": [
                  {
                     "i18nHtmlTitle": {
                        "en-US": "Commits"
                     },
                     "filter": {
                        "fields": "type",
                        "values": "CommitEvent"
                     },
                     "columns": [
                        {
                           "i18nHtmlTitle": {
                              "en-US": "Repository"
                           },
                           "fields": "repo.name",
                           "link": "repo.url"
                        },
                        {
                           "i18nHtmlTitle": {
                              "en-US": "SHA"
                           },
                           "i18nHtmlFormat": {
                              "en-US": "[0:%.6s]"
                           },
                           "fields": "payload.sha",
                           "link": "payload.url"
                        },
                        {
                           "i18nHtmlTitle": {
                              "en-US": "Message"
                           },
                           "fields": "payload.message"
                        }
                     ]
                  },
                  {
                     "i18nHtmlTitle": {
                        "en-US": "Tags"
                     },
                     "filter": {
                        "fields": "payload.ref_type",
                        "values": "tag"
                     },
                     "columns": [
                        {
                           "i18nHtmlTitle": {
                              "en-US": "Repository"
                           },
                           "fields": "repo.name",
                           "link": "repo.url"
                        },
                        {
                           "i18nHtmlTitle": {
                              "en-US": "Name"
                           },
                           "i18nHtmlFormat": {
                              "en-US": "<a href=\"#/history/[repo]/[ref]\">[ref]</a>"
                           },
                           "fields": {
                              "repo": "repo.name",
                              "ref": "payload.ref"
                           }
                        }
                     ]
                  },
                  {
                     "i18nHtmlTitle": {
                        "en-US": "Issues"
                     },
                     "filter": {
                        "fields": "type",
                        "values": "IssuesEvent"
                     },
                     "columns": [
                       {
                           "i18nHtmlTitle": {
                              "en-US": "Issue"
                           },
                           "i18nHtmlFormat": {
                              "en-US": "[repo]#[number]"
                           },
                           "fields": {
                              "repo": "repo.name",
                              "number": "payload.issue.number"
                           },
                           "link": "payload.issue.url"
                        },
                        {
                           "i18nHtmlTitle": {
                              "en-US": "Action"
                           },
                           "i18nHtmlFormat": "[actor] [action]",
                           "fields": {
                              "actor": "actor.login",
                              "action": "payload.action"
                           }
                        },
                        {
                           "i18nHtmlTitle": {
                              "en-US": "Summary"
                           },
                           "fields": "payload.issue.title"
                        }
                     ]
                  }
               ],
               "links": [
                  {
                     "resource": "repos",
                     "field": "url",
                     "i18nHtmlFormat": "<a href=\"[html_url]\" title=\"[full_name]: [description]\">[0]</a>"
                  },
                  {
                     "resource": "commits",
                     "field": "url",
                     "i18nHtmlFormat": "<a href=\"[html_url]\" title=\"[sha]\">[0]</a>"
                  },
                  {
                     "resource": "issues",
                     "field": "url",
                     "i18nHtmlFormat": "<a href=\"[html_url]\" title=\"#[number] ([state] [updated_at])\">[0]</a>"
                  }
               ]
            }
         }
      ],


      "header": [
         {
            "widget": "amd:laxar-headline-widget",
            "features": {
               "headline": {
                  "i18nHtmlText": {
                     "en-US": "Release<span>Station</span>"
                  }
               },
               "intro": {
                  "i18nHtmlText": {
                     "en-US": "for GitHub"
                  }
               }
            }
         }
      ],

      "navigation": [
         {
            "widget": "release-station/search-box-widget",
            "insertBeforeId": "login",
            "features": {
               "search": {
                  "resource": "searchString"
               }
            }
         }
      ],

      "headline": [
         {
            "widget": "release-station/headline-selector-widget",
            "features": {
               "headline": {
                  "level": 2,
                  "i18nHtmlFormat": {
                     "en-US": "Activity"
                  }
               },

               "selections": [
                  {
                     "resource": "month",
                     "options": {
                        "init": [
                           { "value": 1, "i18nHtmlText": "January" },
                           { "value": 2, "i18nHtmlText": "February" },
                           { "value": 3, "i18nHtmlText": "March" },
                           { "value": 4, "i18nHtmlText": "April" },
                           { "value": 5, "i18nHtmlText": "May" },
                           { "value": 6, "i18nHtmlText": "June" },
                           { "value": 7, "i18nHtmlText": "July" },
                           { "value": 8, "i18nHtmlText": "August" },
                           { "value": 9, "i18nHtmlText": "September" },
                           { "value": 10, "i18nHtmlText": "October" },
                           { "value": 11, "i18nHtmlText": "November" },
                           { "value": 12, "i18nHtmlText": "December" }
                        ]
                     }
                  }
               ]
            }
         }
      ],

      "content": [
         {
            "widget": "release-station/activity-calendar-widget",
            "features": {
               "calendar": {
               },
               "repos": {
                  "resource": "repos"
               },
               "events": {
                  "resource": "events"
               },
               "search": {
                  "resource": "searchString",
                  "fields": [
                     "repo.name",
                     "actor.login",
                     "org.login",
                     "payload.message",
                     "payload.ref"
                  ],
                  "match": {
                     "@([\\w-]+)": [ "actor.login" ],
                     "#(\\d+)": [ "payload.issue.id" ],
                     "([\\w-]+/[\\w.-]+)": [ "repo.name" ]
                  }
               },
               "details": {
                  "resource": "details",
                  "action": "openDetails"
               }
            }
         }
      ],

      "footer": [
      ]
   }
}
